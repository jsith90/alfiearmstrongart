{% extends 'base.html' %}
{% block content %}
    <main class="gallery-add">
        <div class="form-header">
        <h1 class="form-title">Create a New Article</h1>
        </div>
        <form class="gallery-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
            <div class="form-title form-group mb-2 col-3 p-3">
                <label for="{{ article_form.title.id_for_label }}">{{ article_form.title.label }}</label>
                {{ article_form.title }}
            </div>
            <div class="form-title form-group p-3 col-sm-9">
                <label for="{{ article_form.body.id_for_label }}">{{ article_form.body.label }}</label>
                {{ article_form.body }}
            </div>
            <div class="form-group mb-2 col-3 p-3 image-input-display">
                <label for="{{ article_form.image1.id_for_label }}">{{ article_form.image1.label }}</label>
                {{ article_form.image1 }}
                <label for="{{ article_form.caption1.id_for_label }}">{{ article_form.caption1.label }}</label>
                {{ article_form.caption1 }}
            </div>
            <div class="form-group mb-2 col-3 p-3 image-input-display">
                <label for="{{ article_form.image2.id_for_label }}">{{ article_form.image2.label }}</label>
                {{ article_form.image2 }}
                <label for="{{ article_form.caption2.id_for_label }}">{{ article_form.caption2.label }}</label>
                {{ article_form.caption2 }}
            </div>
            <div class="form-group mb-2 col-3 p-3 image-input-display">
                <label for="{{ article_form.image3.id_for_label }}">{{ article_form.image3.label }}</label>
                {{ article_form.image3 }}
                <label for="{{ article_form.caption3.id_for_label }}">{{ article_form.caption3.label }}</label>
                {{ article_form.caption3 }}
            </div>
            <div class="form-group mb-2 col-3 p-3 image-input-display">
                <label for="{{ article_form.image4.id_for_label }}">{{ article_form.image4.label }}</label>
                {{ article_form.image4 }}
                <label for="{{ article_form.caption4.id_for_label }}">{{ article_form.caption4.label }}</label>
                {{ article_form.caption4 }}
            </div>
            <div class="add-buttons">
                <label for="add-img">Press for image input
                <button type="button" class="open-image-input" id="add-img">+</button>
                <button type="button" class="close-image-input" id="minus-img">-</button>
                </label>
            </div>
            <div class="form-title form-group mb-2 col-3 p-3">
                <label for="{{ form.title.id_for_label }}">{{ form.slug.label }}</label>
                {{ form.slug }}
            </div>
            <button type="submit" class="publish-button">Create Article</button>
        </form>
    </main>
    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function() {
            // Get all image input divs
            const imageInputs = document.querySelectorAll(".image-input-display");

            // Hide all image inputs initially
            imageInputs.forEach(input => input.style.display = "none");

            // Get the button to show more image inputs
            const openButton = document.querySelector(".open-image-input");

            // Get the button to hide image inputs
            const closeButton = document.querySelector(".close-image-input");

            // Initialize a counter to keep track of the current image input to display
            let currentImageIndex = 0;

            // Show image input on button click
            openButton.addEventListener('click', function() {
                if (currentImageIndex < imageInputs.length) {
                    imageInputs[currentImageIndex].style.display = "block";
                    currentImageIndex++;
                }
            });

            // Hide image input on button click
            closeButton.addEventListener('click', function() {
                if (currentImageIndex > 0) {
                    currentImageIndex--;
                    imageInputs[currentImageIndex].style.display = "none";
                }
            });
        });
    </script>
{% endblock %}